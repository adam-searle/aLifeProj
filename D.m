function [ g ] = D( x, genotype )
%D takes in a perceptual space and outputs an action for given bot
    %states = [0,1,2]; allStates = allcomb(states,states,states,states,states);    
    %^This line gets all possible perceptual states, to save computation this result is the
    %variable below
allStates = [1,0,1,0,1;1,0,1,0,2;1,0,1,1,0;1,0,1,1,1;1,0,1,1,2;1,0,1,2,0;1,0,1,2,1;1,0,1,2,2;1,0,2,0,1;1,0,2,0,2;1,0,2,1,0;1,0,2,1,1;1,0,2,1,2;1,0,2,2,0;1,0,2,2,1;1,0,2,2,2;1,1,0,0,1;1,1,0,0,2;1,1,0,1,0;1,1,0,1,1;1,1,0,1,2;1,1,0,2,0;1,1,0,2,1;1,1,0,2,2;1,1,1,0,1;1,1,1,0,2;1,1,1,1,0;1,1,1,1,1;1,1,1,1,2;1,1,1,2,0;1,1,1,2,1;1,1,1,2,2;1,1,2,0,1;1,1,2,0,2;1,1,2,1,0;1,1,2,1,1;1,1,2,1,2;1,1,2,2,0;1,1,2,2,1;1,1,2,2,2;1,2,0,0,1;1,2,0,0,2;1,2,0,1,0;1,2,0,1,1;1,2,0,1,2;1,2,0,2,0;1,2,0,2,1;1,2,0,2,2;1,2,1,0,1;1,2,1,0,2;1,2,1,1,0;1,2,1,1,1;1,2,1,1,2;1,2,1,2,0;1,2,1,2,1;1,2,1,2,2;1,2,2,0,1;1,2,2,0,2;1,2,2,1,0;1,2,2,1,1;1,2,2,1,2;1,2,2,2,0;1,2,2,2,1;1,2,2,2,2;2,0,1,0,1;2,0,1,0,2;2,0,1,1,0;2,0,1,1,1;2,0,1,1,2;2,0,1,2,0;2,0,1,2,1;2,0,1,2,2;2,0,2,0,1;2,0,2,0,2;2,0,2,1,0;2,0,2,1,1;2,0,2,1,2;2,0,2,2,0;2,0,2,2,1;2,0,2,2,2;2,1,0,0,1;2,1,0,0,2;2,1,0,1,0;2,1,0,1,1;2,1,0,1,2;2,1,0,2,0;2,1,0,2,1;2,1,0,2,2;2,1,1,0,1;2,1,1,0,2;2,1,1,1,0;2,1,1,1,1;2,1,1,1,2;2,1,1,2,0;2,1,1,2,1;2,1,1,2,2;2,1,2,0,1;2,1,2,0,2;2,1,2,1,0;2,1,2,1,1;2,1,2,1,2;2,1,2,2,0;2,1,2,2,1;2,1,2,2,2;2,2,0,0,1;2,2,0,0,2;2,2,0,1,0;2,2,0,1,1;2,2,0,1,2;2,2,0,2,0;2,2,0,2,1;2,2,0,2,2;2,2,1,0,1;2,2,1,0,2;2,2,1,1,0;2,2,1,1,1;2,2,1,1,2;2,2,1,2,0;2,2,1,2,1;2,2,1,2,2;2,2,2,0,1;2,2,2,0,2;2,2,2,1,0;2,2,2,1,1;2,2,2,1,2;2,2,2,2,0;2,2,2,2,1;2,2,2,2,2];
% States00 = allStates(1:27,:); 
% States01 = allStates(28:54,:); 
% States02 = allStates(55:81,:);     
% States10 = allStates(56:108,:); 
% States11 = allStates(109:135,:); 
% States12 = allStates(136:162,:);     
% States20 = allStates(163:189,:); 
% States21 = allStates(190:216,:); 
% States22 = allStates(217:243,:); 
%     
%     if x(1) == 0 
%         if x(2) == 1
%             [~,d] = ismember(x,States01,'rows');
%             d = d + 27;
%         elseif x(2) == 2
%             [~,d] = ismember(x,States02,'rows');
%             d = d + (27*2);
%         else
%             [~,d] = ismember(x,States00,'rows');
%         end
%         
%     elseif x(1) == 1
%         if x(2) == 1
%             [~,d] = ismember(x,States11,'rows');
%             d = d + (27*4);
%         elseif x(2) == 2
%             [~,d] = ismember(x,States12,'rows');
%             d = d + (27*5);
%         else
%             [~,d] = ismember(x,States10,'rows');
%             d = d + (27*3);
%         end
%          
%     else %x(1) == 2
%         if x(2) == 1
%             [~,d] = ismember(x,States21,'rows');
%             d = d + (27*7);
%         elseif x(2) == 2
%             [~,d] = ismember(x,States22,'rows');
%             d = d + (27*8);
%         else
%             [~,d] = ismember(x,States20,'rows');
%             d = d + (27*6);
%         end    
%         
%     end
    [~,d] = ismember(x,allStates,'rows');
    g = genotype(d);
    
    
        
    
    
end

